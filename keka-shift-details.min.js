function msToHMS(e){let t=e/1e3;const n=parseInt(t/3600);t%=3600;const i=parseInt(t/60);return t%=60,n+":"+i+":"+Math.round(t)}function timeToMs(e){const t=e.split(":"),n=t[2]?1e3*t[2]:"";return 60*Number(t[0])*60*1e3+60*Number(t[1])*1e3+n}function getRemainingTime(e){const{shiftEffectiveDuration:t,breakDurationInHHMM:n,timeEntries:i}=e,{actualTimestamp:a,originalPunchStatus:o}=i[0];0!==o&&console.log("%cWaiting for keka to update punch status","background-color: #528FF0;color: #333;padding: 10px;font-size: 14px;");const s=new Date(a),r=new Date,c=r.getTime()-s.getTime(),m=timeToMs(n),g=c-m,u=t.toString().split(".");u[1]?1===u[1].length&&(u[1]+="0"):u[1]="0";const l=timeToMs(u.join(":")),T=l-g,d=msToHMS(T),h=new Date(r.getTime()+T).toLocaleTimeString();return{remaining:d,remainigMs:T,shiftEndPredict:h,shiftStartTimeDateObj:s,breakDurationInHHMM:n,attendMs:g}}var kekaAPIheaders=new Headers,miscToken=localStorage.getItem("access_token");miscToken||console.warn("missing storage access_token"),kekaAPIheaders.append("authorization","Bearer "+miscToken);var requestOptions={method:"GET",headers:kekaAPIheaders,redirect:"follow"};fetch("https://yudiz.keka.com/k/api/mytime/attendance/summary",requestOptions).then(e=>e.json()).then(e=>{const{remaining:t,shiftStartTimeDateObj:n,breakDurationInHHMM:i,attendMs:a,shiftEndPredict:o}=getRemainingTime(e.slice(-1)[0]);console.table([{"Shift Start":n.toLocaleTimeString(),"Total Break":i,"Total Attend Time":msToHMS(a),"Remaining Time":t,"Shift End":o}])}).catch(e=>console.log("error",e));